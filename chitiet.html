<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi Ti·∫øt Acc - SHOP THAIPP</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .detail-container { max-width: 800px; margin: 20px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .detail-img { width: 100%; border-radius: 8px; margin-bottom: 20px; border: 1px solid #eee; }
        .info-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px dashed #eee; }
        .info-label { color: #64748b; font-weight: 500; }
        .info-value { font-weight: bold; color: #1e293b; }
        .price-big { font-size: 24px; color: #e11d48; font-weight: 800; text-align: center; margin: 20px 0; }
        .btn-buy-now { width: 100%; padding: 15px; background: #e11d48; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-buy-now:hover { background: #be123c; transform: translateY(-2px); }
        .back-link { display: inline-block; margin-bottom: 15px; color: #64748b; text-decoration: none; font-size: 14px; }
    </style>
</head>
<body>

<header>
    <div class="logo"><a href="index.html" style="text-decoration:none; color:#e11d48;">‚òÖ SHOP THAIPP ‚òÖ</a></div>
    <div id="userHeader"></div>
</header>

<main style="padding: 10px;">
    <div class="detail-container">
        <a href="index.html" class="back-link">‚Üê Quay l·∫°i trang ch·ªß</a>
        
        <div id="acc-detail-content">
            <p style="text-align:center; padding:50px;">ƒêang t·∫£i th√¥ng tin Acc...</p>
        </div>

        <div class="price-big" id="acc-price">0ƒë</div>
        
        <button class="btn-buy-now" onclick="buyAcc()">MUA NGAY</button>
        
        <div style="margin-top: 20px; font-size: 13px; color: #94a3b8; text-align: center;">
            üõ°Ô∏è Giao d·ªãch t·ª± ƒë·ªông - Nh·∫≠n t√†i kho·∫£n ngay l·∫≠p t·ª©c sau khi mua.
        </div>
    </div>
</main>

<script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
<script src="script.js"></script>

<script>
    // H√†m hi·ªÉn th·ªã d·ªØ li·ªáu ri√™ng cho trang chi ti·∫øt
    function displayAccDetail() {
        const accId = localStorage.getItem("viewingAccId");
        if (!accId) {
            alert("Kh√¥ng t√¨m th·∫•y th√¥ng tin Acc!");
            window.location.href = "index.html";
            return;
        }

        db.ref('shop_accs/' + accId).on('value', (snapshot) => {
            const acc = snapshot.val();
            if (!acc) {
                // Tr∆∞·ªùng h·ª£p Acc v·ª´a b·ªã ng∆∞·ªùi kh√°c mua m·∫•t
                document.getElementById('acc-detail-content').innerHTML = "<h3>Acc n√†y ƒë√£ ƒë∆∞·ª£c b√°n ho·∫∑c kh√¥ng t·ªìn t·∫°i!</h3>";
                return;
            }

            document.getElementById('acc-detail-content').innerHTML = `
                <img src="${acc.img}" class="detail-img" onerror="this.src='https://via.placeholder.com/400x200'">
                <h2 style="margin-bottom:15px; color:#1e293b;">${acc.title}</h2>
                
                <div class="info-row">
                    <span class="info-label">M√£ s·ªë Acc:</span>
                    <span class="info-value">#${accId.slice(-6)}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Danh m·ª•c:</span>
                    <span class="info-value">Li√™n Qu√¢n D∆∞·ªõi ${acc.cat}k</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Tr·∫°ng th√°i:</span>
                    <span class="info-value" style="color:green;">ƒêang b√°n</span>
                </div>
                <div style="margin-top:15px; line-height:1.6; color:#475569;">
                    <b>M√¥ t·∫£:</b> Acc s·∫°ch th√¥ng tin, tr·∫Øng mail, c√≥ th·ªÉ ƒë·ªïi m·∫≠t kh·∫©u ngay sau khi mua.
                </div>
            `;
            document.getElementById('acc-price').innerText = parseInt(acc.price).toLocaleString() + "ƒë";
        });
    }

    // Ch·∫°y khi load trang
    window.onload = function() {
        updateHeaderUI(); // T·ª´ script.js ƒë·ªÉ hi·ªán ti·ªÅn/user
        displayAccDetail();
    };
</script>

</body>
</html>
