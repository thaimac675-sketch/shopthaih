<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªãch S·ª≠ Mua - THAIPP</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <style>
        body { font-family: sans-serif; background: #f1f5f9; padding: 15px; }
        .box { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 12px; }
        .item { border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-bottom: 10px; background: #fff; }
        .acc-box { background: #eee; padding: 10px; margin-top: 10px; border-radius: 5px; border: 1px dashed #e11d48; }
        h2 { color: #e11d48; text-align: center; }
    </style>
</head>
<body>

<div class="box">
    <h2>üõí ACC ƒê√É MUA</h2>
    <div id="history-list">ƒêang t·∫£i l·ªãch s·ª≠...</div>
    <p style="text-align:center; margin-top:20px;"><a href="index.html" style="text-decoration:none; color:#2563eb;">‚Üê Quay l·∫°i Shop</a></p>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyC75Af-i4AXLH6X...",
        authDomain: "shopthai-ea4c1.firebaseapp.com",
        databaseURL: "https://shopthai-ea4c1-default-rtdb.firebaseio.com",
        projectId: "shopthai-ea4c1",
        storageBucket: "shopthai-ea4c1.appspot.com",
        messagingSenderId: "114276793671",
        appId: "1:114276793671:web:0b257c70c675ef715f7d23"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const user = localStorage.getItem("currentUser");

    if(!user) {
        document.getElementById('history-list').innerHTML = "Vui l√≤ng ƒëƒÉng nh·∫≠p!";
    } else {
        db.ref('history/' + user).on('value', (s) => {
            const data = s.val();
            const list = document.getElementById('history-list');
            list.innerHTML = "";
            if(!data) {
                list.innerHTML = "B·∫°n ch∆∞a mua t√†i kho·∫£n n√†o.";
                return;
            }
            for(let id in data) {
                const item = data[id];
                list.innerHTML += `
                    <div class="item">
                        <b>${item.title}</b> <small>(${item.time})</small><br>
                        Gi√°: <span style="color:red;">${parseInt(item.price).toLocaleString()}ƒë</span>
                        <div class="acc-box">
                            TK: <b style="color:blue;">${item.tk}</b><br>
                            MK: <b style="color:blue;">${item.mk}</b>
                        </div>
                    </div>`;
            }
        });
    }
</script>
</body>
</html>
